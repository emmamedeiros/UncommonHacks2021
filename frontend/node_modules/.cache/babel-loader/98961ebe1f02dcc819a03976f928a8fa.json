{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = generateVariantFunction;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _postcss = _interopRequireDefault(require(\"postcss\"));\n\nvar _postcssSelectorParser = _interopRequireDefault(require(\"postcss-selector-parser\"));\n\nvar _useMemo = require(\"./useMemo\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nconst classNameParser = (0, _postcssSelectorParser.default)(selectors => {\n  return selectors.first.filter(({\n    type\n  }) => type === 'class').pop().value;\n});\nconst getClassNameFromSelector = (0, _useMemo.useMemo)(selector => classNameParser.transformSync(selector), selector => selector);\n\nfunction generateVariantFunction(generator, options = {}) {\n  return {\n    options,\n    handler: (container, config) => {\n      const cloned = _postcss.default.root({\n        nodes: container.clone().nodes\n      });\n\n      container.before(_lodash.default.defaultTo(generator({\n        container: cloned,\n        separator: config.separator,\n        modifySelectors: modifierFunction => {\n          cloned.each(rule => {\n            if (rule.type !== 'rule') {\n              return;\n            }\n\n            rule.selectors = rule.selectors.map(selector => {\n              return modifierFunction({\n                get className() {\n                  return getClassNameFromSelector(selector);\n                },\n\n                selector\n              });\n            });\n          });\n          return cloned;\n        }\n      }), cloned).nodes);\n    }\n  };\n}","map":null,"metadata":{},"sourceType":"script"}